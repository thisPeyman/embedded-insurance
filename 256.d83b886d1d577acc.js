"use strict";(self.webpackChunkembedded_insurance=self.webpackChunkembedded_insurance||[]).push([[256],{7256:(ht,f,s)=>{s.r(f),s.d(f,{BodyModule:()=>dt});var u=s(9808),t=s(5e3),A=s(226),V=s(7144);let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[A.vT,u.ez,V.Q8]]}),e})();var O=s(647),g=s(3007),r=s(5620);const y=(0,r.PH)("[Body Insurance - Car Detail] Load Vehicles Data"),C=(0,r.PH)("[Body Insurance - Car Detail] Load Vehicles Success",(0,r.Ky)()),$=(0,r.PH)("[Body Insurance - Car Detail] Load Vehicles Error"),v=(0,r.PH)("[Body Insurance - Car Detail] Update Selected Vehicle",(0,r.Ky)()),z=(0,r.PH)("[Body Insurance] Go To Next Flow"),S=(0,r.PH)("[Body Insurance] Go To Previous Flow"),F=(0,r.Tz)({name:"body-insurance",reducer:(0,r.Lq)({vehicles:[],flowStep:1,selectedVehicle:{brand:"",model:"",usage:"",builtYear:0,hasInsuranceHistory:!1,isBrandNew:!1,price:0,mainDiscountYears:0,sideDiscountYears:0}},(0,r.on)(C,(e,{vehicles:o})=>Object.assign(Object.assign({},e),{vehicles:o})),(0,r.on)(v,(e,o)=>Object.assign(Object.assign({},e),{selectedVehicle:Object.assign(Object.assign({},e.selectedVehicle),o.vehicle)})),(0,r.on)(z,e=>Object.assign(Object.assign({},e),{flowStep:e.flowStep+1})),(0,r.on)(S,e=>Object.assign(Object.assign({},e),{flowStep:e.flowStep-1})))}),{selectVehicles:x,selectFlowStep:Y,selectSelectedVehicle:b}=F,L=(0,r.P1)(x,e=>{const o=[];for(let n=0;n<e.length;n++){const i=e[n].category;o.includes(i)||o.push(i)}return o}),Q=(0,r.P1)(b,x,({brand:e},o)=>o.filter(n=>n.category===e).map(n=>n.caption));let l=(()=>{class e{constructor(n){this.store=n,this.flowStep$=this.store.select(Y),this.brands$=this.store.select(L),this.models$=this.store.select(Q),this.selectedVehicle$=this.store.select(b)}loadVehiclesData(){this.store.dispatch(y())}updateSelectedVehicle(n){this.store.dispatch(v({vehicle:n}))}nextFlow(){this.store.dispatch(z())}prevFlow(){this.store.dispatch(S())}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var _=s(5698),c=s(2382),w=s(5634);function j(e,o){if(1&e&&t._UZ(0,"nz-option",4),2&e){const n=o.$implicit;t.Q6J("nzLabel",n)("nzValue",n)}}const M=["*"];let I=(()=>{class e{constructor(){this.options=null}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-select-item"]],inputs:{options:"options",control:"control"},ngContentSelectors:M,decls:5,vars:2,consts:[[1,"flex","justify-center","gap-5","items-center","px-3","mt-7"],[1,"text-lg"],["nzShowSearch","","nzSize","large",1,"text-lg","w-1/2",3,"formControl"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[3,"nzLabel","nzValue"]],template:function(n,i){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"h3",1),t.Hsn(2),t.qZA(),t.TgZ(3,"nz-select",2),t.YNc(4,j,1,2,"nz-option",3),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("formControl",i.control),t.xp6(1),t.Q6J("ngForOf",i.options))},directives:[w.Vq,c.JJ,c.oH,u.sg,w.Ip],styles:[""]}),e})(),P=(()=>{class e{constructor(n,i){this.bodyFacade=n,this.fb=i,this.brands$=this.bodyFacade.brands$,this.models$=this.bodyFacade.models$,this.usages=["\u0634\u062e\u0635\u06cc","\u062a\u0627\u06a9\u0633\u06cc \u062f\u0631\u0648\u0646 \u0634\u0647\u0631\u06cc","\u062a\u0627\u06a9\u0633\u06cc \u0628\u0631\u0648\u0646 \u0634\u0647\u0631\u06cc"],this.yearsList=Array.from({length:51},(a,p)=>1351+p).reverse(),this.form=this.fb.group({brand:"",model:"",usage:"",builtYear:""})}ngOnInit(){this.bodyFacade.loadVehiclesData(),this.setFormValues(),this.form.valueChanges.subscribe(n=>this.updateVehicle(n))}updateVehicle(n){this.bodyFacade.updateSelectedVehicle(n)}nextFlow(){this.bodyFacade.nextFlow()}setFormValues(){let n={};this.bodyFacade.selectedVehicle$.pipe((0,_.q)(1)).subscribe(h=>n=h);const{brand:i,model:a,usage:p,builtYear:m}=n;this.form.setValue({brand:i,model:a,usage:p,builtYear:m})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-car-detail"]],decls:16,vars:13,consts:[[1,"relative","pt-10","text-center"],[1,"text-center","text-3xl"],[3,"formGroup"],[3,"options","control"],[1,"bg-green-600","text-gray-50","py-3","px-4","mt-10","rounded-sm","shadow-sm","text-lg",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"\u0645\u0634\u062e\u0635\u0627\u062a \u0627\u0648\u0644\u06cc\u0647 \u0645\u0627\u0634\u06cc\u0646"),t.qZA(),t.TgZ(3,"form",2)(4,"app-select-item",3),t.ALo(5,"async"),t._uU(6,"\u0628\u0631\u0646\u062f \u062e\u0648\u062f\u0631\u0648"),t.qZA(),t.TgZ(7,"app-select-item",3),t.ALo(8,"async"),t._uU(9,"\u0645\u062f\u0644 \u062e\u0648\u062f\u0631\u0648"),t.qZA(),t.TgZ(10,"app-select-item",3),t._uU(11,"\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f\u0631\u0648"),t.qZA(),t.TgZ(12,"app-select-item",3),t._uU(13,"\u0633\u0627\u0644 \u0633\u0627\u062e\u062a"),t.qZA()(),t.TgZ(14,"button",4),t.NdJ("click",function(){return i.nextFlow()}),t._uU(15," \u062b\u0628\u062a \u0648 \u0627\u062f\u0627\u0645\u0647 "),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("options",t.lcZ(5,9,i.brands$))("control",i.form.get("brand")),t.xp6(3),t.Q6J("options",t.lcZ(8,11,i.models$))("control",i.form.get("model")),t.xp6(3),t.Q6J("options",i.usages)("control",i.form.get("usage")),t.xp6(2),t.Q6J("options",i.yearsList)("control",i.form.get("builtYear")))},directives:[c._Y,c.JL,c.sg,I],pipes:[u.Ov],styles:[".action[_ngcontent-%COMP%]{cursor:pointer;border-radius:9999px;--tw-bg-opacity: 1;background-color:rgb(239 68 68 / var(--tw-bg-opacity));padding:1rem 1.25rem;font-size:1.125rem;line-height:1.75rem;--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}"]}),e})();var H=s(1047);let q=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-input"]],inputs:{control:"control"},decls:4,vars:1,consts:[[1,"flex","justify-center","gap-5","items-center","px-3","mt-7"],[1,"text-lg"],["nz-input","","nzSize","large","type","number","dir","ltr",1,"text-lg","w-1/2",3,"formControl"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"\u0627\u0631\u0632\u0634 \u062e\u0648\u062f\u0631\u0648 (\u062a\u0648\u0645\u0627\u0646)"),t.qZA(),t._UZ(3,"input",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("formControl",i.control))},directives:[H.Zp,c.wV,c.Fj,c.JJ,c.oH],styles:[""]}),e})();var T=s(1078);const G=["*"];let k=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-switch"]],inputs:{control:"control"},ngContentSelectors:G,decls:4,vars:1,consts:[[1,"flex","justify-center","gap-5","mt-7"],[1,"text-lg"],["nzCheckedChildren","\u0628\u0644\u0647","nzUnCheckedChildren","\u062e\u06cc\u0631",1,"text-blue-600","bg-inherit",3,"formControl"]],template:function(n,i){1&n&&(t.F$t(),t.TgZ(0,"div",0)(1,"h2",1),t.Hsn(2),t.qZA(),t._UZ(3,"nz-switch",2),t.qZA()),2&n&&(t.xp6(3),t.Q6J("formControl",i.control))},directives:[T.i,c.JJ,c.oH],styles:[""]}),e})();function X(e,o){if(1&e&&(t.TgZ(0,"app-switch",3),t._uU(1,"\u0622\u06cc\u0627 \u0645\u0627\u0634\u06cc\u0646 \u0634\u0645\u0627 \u0635\u0641\u0631 \u06a9\u06cc\u0644\u0648\u0645\u062a\u0631 \u0627\u0633\u062a\u061f"),t.qZA()),2&e){const n=t.oxw();t.Q6J("control",n.form.get("isBrandNew"))}}function R(e,o){if(1&e&&(t.ynx(0),t.TgZ(1,"app-select-item",9)(2,"p",10),t._uU(3,"\u0645\u06cc\u0632\u0627\u0646 \u062a\u062e\u0641\u06cc\u0641 \u0639\u062f\u0645 \u062e\u0633\u0627\u0631\u062a "),t._UZ(4,"br"),t._uU(5,"\u067e\u0648\u0634\u0634 \u0647\u0627\u06cc \u0627\u0635\u0644\u06cc"),t.qZA()(),t.TgZ(6,"app-select-item",9)(7,"p",10),t._uU(8," \u0645\u06cc\u0632\u0627\u0646 \u062a\u062e\u0641\u06cc\u0641 \u0639\u062f\u0645 \u062e\u0633\u0627\u0631\u062a "),t._UZ(9,"br"),t._uU(10,"\u067e\u0648\u0634\u0634 \u0647\u0627\u06cc \u0627\u0636\u0627\u0641\u06cc "),t.qZA()(),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("options",n.discountYears)("control",n.form.get("mainDiscountYears")),t.xp6(5),t.Q6J("options",n.discountYears)("control",n.form.get("sideDiscountYears"))}}let K=(()=>{class e{constructor(n,i){this.bodyFacade=n,this.fb=i,this.discountYears=[1,2,3,4,5,6,7,8],this.form=this.fb.group({price:"",hasInsuranceHistory:!1,isBrandNew:!1,mainDiscountYears:"",sideDiscountYears:""})}get hasHistory(){return this.form.value.hasInsuranceHistory}ngOnInit(){this.setFormValues()}prevFlow(){this.bodyFacade.prevFlow()}nextFlow(){this.bodyFacade.updateSelectedVehicle(this.form.value),this.bodyFacade.nextFlow()}setFormValues(){let n={};this.bodyFacade.selectedVehicle$.pipe((0,_.q)(1)).subscribe(mt=>n=mt);const{price:i,hasInsuranceHistory:a,isBrandNew:p,mainDiscountYears:m,sideDiscountYears:h}=n;this.form.setValue({price:i,hasInsuranceHistory:a,isBrandNew:p,mainDiscountYears:m,sideDiscountYears:h})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-car-price"]],decls:14,vars:5,consts:[[1,"relative","pt-10","text-center"],[1,"text-center","text-3xl"],[3,"formGroup"],[3,"control"],[3,"control",4,"ngIf"],[4,"ngIf"],[1,"grid","grid-cols-1","gap-5","lg:grid-cols-2"],[1,"bg-gray-600","text-gray-50","py-3","px-4","rounded-sm","shadow-sm","text-lg","w-fit","mx-auto","mt-5",3,"click"],[1,"bg-green-600","text-gray-50","py-3","px-4","rounded-sm","shadow-sm","text-lg","w-fit","mx-auto","lg:mt-5",3,"click"],[3,"options","control"],[1,"text-base"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"\u0627\u0631\u0632\u0634 \u062e\u0648\u062f\u0631\u0648"),t.qZA(),t.TgZ(3,"form",2),t._UZ(4,"app-input",3),t.TgZ(5,"app-switch",3),t._uU(6,"\u0622\u06cc\u0627 \u0633\u0627\u0628\u0642\u0647 \u0628\u06cc\u0645\u0647 \u0628\u062f\u0646\u0647 \u062f\u0627\u0631\u06cc\u062f\u061f"),t.qZA(),t.YNc(7,X,2,1,"app-switch",4),t.YNc(8,R,11,4,"ng-container",5),t.qZA(),t.TgZ(9,"div",6)(10,"button",7),t.NdJ("click",function(){return i.prevFlow()}),t._uU(11," \u0645\u0631\u062d\u0644\u0647\u200c\u06cc \u0642\u0628\u0644 "),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return i.nextFlow()}),t._uU(13," \u0645\u0634\u0627\u0647\u062f\u0647\u200c \u0642\u06cc\u0645\u062a "),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("control",i.form.get("price")),t.xp6(1),t.Q6J("control",i.form.get("hasInsuranceHistory")),t.xp6(2),t.Q6J("ngIf",!i.hasHistory),t.xp6(1),t.Q6J("ngIf",i.hasHistory))},directives:[c._Y,c.JL,c.sg,q,k,u.O5,I],styles:[".ant-switch{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity))}"]}),e})(),W=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inquiry"]],decls:2,vars:0,template:function(n,i){1&n&&(t.TgZ(0,"p"),t._uU(1,"inquiry works!"),t.qZA())},styles:[""]}),e})();function tt(e,o){1&e&&t._UZ(0,"app-car-detail")}function et(e,o){1&e&&t._UZ(0,"app-car-price")}function nt(e,o){1&e&&t._UZ(0,"app-inquiry")}const ot=[{path:"",component:(()=>{class e{constructor(n){this.bodyFacade=n,this.flowStep$=this.bodyFacade.flowStep$}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-body"]],decls:5,vars:6,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(n,i){1&n&&(t.ynx(0,0),t.ALo(1,"async"),t.YNc(2,tt,1,0,"app-car-detail",1),t.YNc(3,et,1,0,"app-car-price",1),t.YNc(4,nt,1,0,"app-inquiry",1),t.BQk()),2&n&&(t.Q6J("ngSwitch",t.lcZ(1,4,i.flowStep$)),t.xp6(2),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3))},directives:[u.RF,u.n9,P,K,W],pipes:[u.Ov],styles:[""]}),e})()}];let it=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ot)],g.Bz]}),e})();var N=s(9646),st=s(8505),rt=s(2340),Z=s(520);let B=(()=>{class e{constructor(n){this.http=n,this.rootUrl=rt.N.apiUrl}getVehiclesData(){return this.vehiclesCatch?(0,N.of)(this.vehiclesCatch):this.http.get(`${this.rootUrl}/vehicle_models`).pipe((0,st.b)(n=>this.vehiclesCatch=n))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var d=s(4394),ct=s(3900),at=s(4004),ut=s(262);let pt=(()=>{class e{constructor(n,i){this.actions$=n,this.bodyService=i,this.loadVehicles=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(y),(0,ct.w)(()=>this.bodyService.getVehiclesData().pipe((0,at.U)(a=>C({vehicles:a})),(0,ut.K)(a=>(0,N.of)($()))))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(d.eX),t.LFG(B))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var lt=s(4466);let dt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[l,B],imports:[[u.ez,it,J,O.PV,lt.m,c.u5,c.UX,Z.JF,d.sQ.forFeature([pt]),r.Aw.forFeature(F),T.m]]}),e})()}}]);